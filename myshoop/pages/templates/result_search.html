{% extends '_base.html' %}

{% load static %}

{% load tag_library %}

{% block title %}{% endblock title %}

{% block content %}
    {% return_data_three user user_additional_data books categories as data %}
    {{ data|json_script:"data_id" }}
    {{ query }}
    <div class="d-flex flex-row" style="">
        {% for p in page_obj|slice:":4" %}
        {% if p %}
        <div class="col pt-5" style="height: 150;">
            <div class="d-flex justify-content-center" style="height: 200px;"><a href="/{{ p.product_type }}/{{ p.link }}"><img class="mr-2" src="{{ p.menu_img }}"></a></div>
            <p class="text-muted mb-2 ml-4 mt-1" style="font-family: sans-serif Helvetica; font-size: 14px; width: 80%;">
                <span style="font-size: 13px;">{% display_authors p.authors %},</span><br>
                <a href="/{{ p.product_type }}/{{ p.link }}">{{ p.title }}</a><br>
                {% if not p.title|length > 24 %}
                <br>
                {% endif %}
                {% if p.promotional_price != '0.00' %}
                <del><strong>{{ p.price }} zł</strong></del>&nbsp;
                <strong> {{ p.promotional_price }} zł</strong><br>
                {% else %}
                <strong>{{ p.price }} zł</strong><br>
                {% endif %}
                {% if p.rate == 0 %}
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                {% elif p.rate == 1 %}
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                {% elif p.rate == 2 %}
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                {% elif p.rate == 3 %}
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                {% elif p.rate == 4 %}
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span>
                {% elif p.rate == 5 %}
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                {% endif %}
            </p>
            <button type="button" class="buy btn btn-success ml-4" index="{{ p.index }}">Kup</button>
        </div>
        {% else %}
        <div class="col pt-5" style="height: 150; width: 25%">
        </div>
        {% endif %}
        {% endfor %}
    </div>
    <hr>
    <div class="d-flex flex-row" style="">
        {% for p in page_obj|slice:"4:8" %}
        {% if p %}
        <div class="col pt-5" style="height: 150;">
            <div class="d-flex justify-content-center" style="height: 200px;"><a href="/{{ p.product_type }}/{{ p.link }}"><img class="mr-2" src="{{ p.menu_img }}"></a></div>
            <p class="text-muted mb-2 ml-4 mt-1" style="font-family: sans-serif Helvetica; font-size: 13px; width: 80%;">
                <span style="font-size: 13px;">{% display_authors p.authors %},</span><br>
                <a href="/{{ p.product_type }}/{{ p.link }}">{{ p.title }}</a><br>
                {% if not p.title|length > 24 %}
                <br>
                {% endif %}
                {% if p.promotional_price != '0.00' %}
                <del><strong>{{ p.price }} zł</strong></del>&nbsp;
                <strong> {{ p.promotional_price }} zł</strong><br>
                {% else %}
                <strong>{{ p.price }} zł</strong><br>
                {% endif %}
                {% if p.rate == 0 %}
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                {% elif p.rate == 1 %}
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                {% elif p.rate == 2 %}
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                {% elif p.rate == 3 %}
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                {% elif p.rate == 4 %}
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span>
                {% elif p.rate == 5 %}
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                {% endif %}
            </p>
            <button type="button" class="buy btn btn-success ml-4" index="">Kup</button>
        </div>
        {% else %}
        <div class="col pt-5" style="height: 150; width: 25%">
        </div>
        {% endif %}
        {% endfor %}
    </div>
    <hr>
    <div class="d-flex flex-row" style="">
        {% for p in page_obj|slice:"8:12" %}
        {% if p %}
        <div class="col pt-5" style="height: 150;">
            <div class="d-flex justify-content-center" style="height: 200px;"><a href="/{{ p.product_type }}/{{ p.link }}"><img class="mr-2" src="{{ p.menu_img }}"></a></div>
            <p class="text-muted mb-2 ml-4 mt-1" style="font-family: sans-serif Helvetica; font-size: 13px; width: 80%;">
                <span style="font-size: 13px;">{% display_authors p.authors %},</span><br>
                <a href="/{{ p.product_type }}/{{ p.link }}">{{ p.title }}</a><br>
                {% if not p.title|length > 24 %}
                <br>
                {% endif %}
                {% if p.promotional_price != '0.00' %}
                <del><strong>{{ p.price }} zł</strong></del>&nbsp;
                <strong> {{ p.promotional_price }} zł</strong><br>
                {% else %}
                <strong>{{ p.price }} zł</strong><br>
                {% endif %}
                {% if p.rate == 0 %}
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                {% elif p.rate == 1 %}
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                {% elif p.rate == 2 %}
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                {% elif p.rate == 3 %}
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
                {% elif p.rate == 4 %}
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span>
                {% elif p.rate == 5 %}
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                {% endif %}
            </p>
            <button type="button" class="buy btn btn-success ml-4" index="{{ p.index }}">Kup</button>
        </div>
        {% else %}
        <div class="col pt-5" style="height: 150; width: 25%">
        </div>
        {% endif %}
        {% endfor %}
    </div>
    <hr>
    <ul class="pagination">
    {% if page_obj.number == 1 %}
        <li class="page-item" style=""><a class="page-link" href="">Poprzednia</a></li>
        <li class="active page-item"><a class="page-link" href="?page=1&cat={{ categories_url }}&query={{ query }}">1</a></li>
        {% if page_obj.has_next %}
        <li class="page-item"><a class="page-link" href="?page=2&cat={{ categories_url }}&query={{ query }}">2</a></li>
        {% if paginator.num_pages >= 3 %}
        <li class="page-item"><a class="page-link" href="?page=3&cat={{ categories_url }}&query={{ query }}">3</a></li>
        {% endif %}
        <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}&cat={{ categories_url }}&query={{ query }}">Następna</a></li>
        {% endif %}
    {% else %}
        <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}&cat={{ categories_url }}&query={{ query }}">Poprzednia</a></li>
        <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}&cat={{ categories_url }}&query={{ query }}">{{ page_obj.previous_page_number }}</a></li>
        <li class="active page-item"><a class="page-link" href="">{{ page_obj.number }}</a></li>
        {% if page_obj.has_next %}
        <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}&cat={{ categories_url }}&query={{ query }}">{{ page_obj.next_page_number }}</a></li>
        <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}&cat={{ categories_url }}&query={{ query }}">Next</a></li>
        {% else %}
        <li class="page-item"><a class="page-link" href="">Next</a></li>
        {% endif %}
    {% endif %}
    </ul>

{% include 'pagesmodals.html' %}
{% endblock content %}

{% block script %}<script src="{% static 'js/pagesscript.js' %}"></script>{% endblock script %}